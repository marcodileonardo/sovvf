<nav *ngIf="listeSediNavbarLoaded$ | async" class="navbar navbar-expand-lg text-light"
     [ngClass]="{'navbar-dark bg-dark': !turnoExtra, 'navbar-danger bg-danger': turnoExtra}">
    <div class="clearfix w-100">
        <!-- Zona Sinistra -->
        <div class="float-left">
            <div class="clearfix">
                <!-- Bottoni Sinistra -->
                <div class="float-left mr-5">
                    <button class="btn btn-outline-light font-weight-bolder mr-2" ngbTooltip="Vai alla lista Chiamate/Interventi"
                            [routerLink]="['/' + RoutesPath.Home]"
                            [routerLinkActive]="!schedeContattoStatus ? ['btn-light-nav', 'text-dark'] : ['btn-outline-light']">
                        <span class="d-inline-block">CHIAMATE / INTERVENTI</span>
                    </button>
                    <button class="btn btn-outline-light font-weight-bolder mr-2"
                            ngbTooltip="Visualizza Mezzi in Servizio"
                            [disabled]="colorButtonView && colorButtonView[2] === 'btn-secondary' || disabledMezziInServizio"
                            [ngClass]="getMezziInServizioBtnClasses()"
                            [class.cursor-not-allowed]="colorButtonView && colorButtonView[2] === 'btn-secondary'"
                            (click)="onMezziInSerivizo()">
                        <span class="d-inline-block">MEZZI</span>
                    </button>
                    <app-tasto-schede-contatto [active]="schedeContattoStatus$ | async"
                                               [disabled]="(chiamataStatus$ | async) || (permessiFeature.SchedeContatto | checkPermission)"></app-tasto-schede-contatto>
                </div>
                <!-- Treeview -->
                <div class="float-left mr-5">
                    <app-unita-operativa *ngIf="listeSediNavbarLoaded$ | async" [colorButton]="colorButton"
                                         [cache]="true">
                    </app-unita-operativa>
                </div>
                <!-- Turno -->
                <div class="float-left mr-5">
                    <app-turno [turno]="turnoCalendario" [turnoExtra]="turnoExtra"></app-turno>
                </div>
                <!-- Data/Ora -->
                <div class="float-left">
                    <app-clock [time]="time"></app-clock>
                </div>
            </div>
        </div>
        <!-- Zona Destra -->
        <div class="float-right">
            <div class="clearfix">
                <!-- Nuova versione -->
                <div class="float-left mr-2">
                    <ng-template [ngIf]="newVersion">
                        <app-bottone-nuova-versione [btnBlock]="true"
                                                    (doAction)="onGetNewVersion()"></app-bottone-nuova-versione>
                    </ng-template>
                    <ng-template [ngIf]="newVersionSoon && !newVersion">
                        <app-bottone-nuova-versione [btnBlock]="true"
                                                    [testo]="'Nuova versione presto disponibile'"
                                                    [tooltip]="'A breve sarà disponibile una nuova versione, clicca per maggiori informazioni'"
                                                    (doAction)="onNewVersionSoon()"></app-bottone-nuova-versione>
                    </ng-template>
                    <ng-template
                            [ngIf]="newFeaturesInfo && !newVersionSoon && !newVersion && url?.indexOf('changelog') === -1">
                        <app-bottone-nuova-versione [btnBlock]="true"
                                                    [icona]="'fa-newspaper-o'"
                                                    [testo]="'Nuova versione: scopri di più'"
                                                    [tooltip]="'Clicca per visualizzare le novità della nuova versione'"
                                                    (doAction)="onNewFeaturesInfo()"></app-bottone-nuova-versione>
                    </ng-template>
                </div>
                <!-- Operatore e Bottono Destra -->
                <div class="float-right">
                    <button class="btn btn-outline-light mr-2" ngbTooltip="Visualizza Trasferimenti Chiamate"
                            [routerLink]="['/' + RoutesPath.TrasferimentoChiamata]"
                            [routerLinkActive]="['btn-light-nav', 'text-dark']">
                        <i class="fa fa-exchange"></i>
                    </button>
                    <button class="btn btn-outline-light mr-2" ngbTooltip="Visualizza Rubrica"
                            [routerLink]="['/' + RoutesPath.Rubrica]"
                            [routerLinkActive]="['btn-light-nav', 'text-dark']">
                        <i class="fa fa-address-book"></i>
                    </button>
                    <button class="btn btn-outline-light mr-2" ngbTooltip="Visualizza Gestione Utenti"
                            [routerLink]="['/' + RoutesPath.GestioneUtenti]"
                            [routerLinkActive]="['btn-light-nav', 'text-dark']">
                        <i class="fa fa-users"></i>
                    </button>
                    <button class="btn btn-outline-light" ngbTooltip="Visualizza Info Aggiornamenti"
                            [routerLink]="['/' + RoutesPath.Changelog]"
                            [routerLinkActive]="['btn-light-nav', 'text-dark']">
                        <i class="fa fa-newspaper-o"></i>
                    </button>
                    <app-operatore [user]="user" [ruoliUtenteLoggato]="ruoliUtenteLoggato"
                                   (notificheLette)="setNotificheLette()" (logout)="logout()"></app-operatore>
                </div>
            </div>
        </div>
    </div>
</nav>
